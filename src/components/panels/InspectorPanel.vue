<script setup lang="ts">
import { ComputedRef } from 'vue'
import { isText, isVideo } from '../../composables/useTimeline'
import TextStripInspector from '../TextStripInspector.vue'
import { Strip } from '~~/src/core/Strip'
import { TextStripEffect } from '~~/src/core/TextStripEffect'
import { getEffect } from '~~/src/utils/getEffect'
const { timeline, updateEffect } = useTimeline()

const strip = computed(() => {
  return timeline.value.selectedStrips[0] as Strip | null
})

const effect: ComputedRef<TextStripEffect | null> = computed(() => {
  return strip.value?.effects.find(
    e => e.type == 'Text'
  ) as TextStripEffect | null
})
</script>

<template>
  <div v-if="strip" style="height: 100%; overflow-y: scroll">
    <text-strip-inspector v-if="getEffect(strip, 'Text')" :strip="strip" />
    <video-strip-inspector
      v-else-if="getEffect(strip, 'Video')"
      :strip="strip"
    />
  </div>
</template>
